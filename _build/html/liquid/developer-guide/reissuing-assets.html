


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reissuing Assets &mdash; R A N D Y M c M I L L A N</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/jquery.fancybox.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/glpi.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="R A N D Y M c M I L L A N" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            
            <img src="../../_static/images/glpi.png" class="logo" />
          
          </a>

          
            
              <div class="version">
                16048900038860

                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">twitter.com</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://twitter.com/randymcmillan">/randymcmillan</a></li>
</ul>
<p class="caption"><span class="caption-text">keybase.io</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/randymcmillan">/randymcmillan</a></li>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/team/bitcoincore">/bitcoincore</a></li>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/team/bitcoinand">/bitcoinAnd</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html"></a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Reissuing Assets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reissuing-assets">
<h1>Reissuing Assets<a class="headerlink" href="#reissuing-assets" title="Permalink to this headline">¶</a></h1>
<p>In this section we’ll look at reissuing an amount of the asset we previously issued. We’ll re-use the asset hex we stored in the “ASSET” variable. Reissuing just means “creating some more of” in this context. For future use, we’ll store the result of the “reissueasset” command in a variable named “RTRANS” and from that, strip out the transaction ID, storing it in another variable named “RTXID”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">RTRANS</span><span class="o">=</span><span class="k">$(</span>elements-cli reissueasset <span class="nv">$ASSET</span> <span class="m">99</span><span class="k">)</span>
Alice:~$ <span class="nv">RTXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RTRANS</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>We’ve just created 99 more units of our new asset. As an aside, because we already labelled the asset in the previous example, we could have also passed “demoasset” in as the first parameter instead of the hex identifier and it would have worked exactly the same.</p>
<p>To check this issuance history of our asset (and ignore the “bitcoin” issuance) we can run the “listissuances” command and specify the asset we are interested in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances <span class="nv">$ASSET</span>
</pre></div>
</div>
<p>For the above command you may also pass the asset label in instead of the hex value. As has been noted before, be aware that labels are stored locally and are not network-wide.</p>
<p>Along with the original issuance you should see a new entry with the following property:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;isreissuance&quot;: true,
</pre></div>
</div>
<p>This property allows us to differentiate between initial issuances and reissuances. Note that the transaction id where amounts of the asset were created is also included in the returned data.</p>
<p>Let’s look at the details of the transaction where we reissued our asset:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli gettransaction <span class="nv">$RTXID</span>
</pre></div>
</div>
<p>Scroll to the top of the returned transaction data as there are a few things worth noting here. The first is that within the “amount” section we can see that 0 “bitcoin” and 99 “demoasset” were transacted:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;amount&quot;: {
  &quot;bitcoin&quot;: 0.00000000,
  &quot;33244cc19dd9df0fd901e27246e3413c8f6a560451e2f3721fb6f636791087c7&quot;: 0.00000000,
  &quot;demoasset&quot;: 99.00000000,
</pre></div>
</div>
<p>This information suggests that an Liquid transaction can transact more than one type of asset within the same transaction, which is indeed the case.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To send different types of asset in the same transaction, the “sendmany” command is used. The syntax is the same as in Bitcoin.</p>
</div>
<p>The “amount” section shows the net effect of the transaction as: 0 “bitcoin”, 99 “demoasset” and also another asset that is 0. That unlabelled asset is our reissuance token (the hex for which will differ from that above but the results are otherwise the same). What this shows is that once the sent and received amounts are totalled we have created 99 “demoasset”. You can see how the values in the “amount” section are derived by scrolling down the returned data and looking within the “details” section.</p>
<p>You will see that amounts of 99 “demoasset” and 1 reissuance token were sent:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;category&quot;: &quot;send&quot;,
&quot;amount&quot;: -99.00000000,

&quot;category&quot;: &quot;send&quot;,
&quot;amount&quot;: -1.00000000,
</pre></div>
</div>
<p>And that further on the same amounts were received:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;category&quot;: &quot;receive&quot;,
&quot;amount&quot;: 99.00000000,

&quot;category&quot;: &quot;receive&quot;,
&quot;amount&quot;: 1.00000000,
</pre></div>
</div>
<p>We can see how the “amount” section above therefore lists the net transfer of 0 (-1 +1) tokens. The reason why the net of this is the creation of 99 new “demoasset” is that the “reissueasset” command essentially spends from a zero balance address, and so the received amount has the effect of creating 99 new “demoasset”. The 99 new “demoasset” are basically spent into existence. It is worth highlighting again that in order to reissue an asset you must hold a related reissuance token. They must therefore be allocated wisely.</p>
<p>To check that the blinding works the same for a reissuance transaction as it does for a normal transaction we can check Bob’s view of Alice’s reissuance transaction. Wait until a block is confirmed to let the nodes sync, then run the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RAWRTRANS</span><span class="o">=</span><span class="k">$(</span>elements-cli getrawtransaction <span class="nv">$RTXID</span><span class="k">)</span>
Bob:~$ elements-cli decoderawtransaction <span class="nv">$RAWRTRANS</span>
</pre></div>
</div>
<p>We can see that the amounts and asset types are indeed blinded with results like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;value-minimum&quot;: 0.00000001,
&quot;value-maximum&quot;: 42.94967296,
</pre></div>
</div>
<p>You could unblind these using the techniques we used for the initial issuance should you want to.</p>
<p>We have seen that reissuance is just a special kind of spending transaction whereby you can create more of the original asset, so long as you hold a valid reissuance token in your wallet. Next we will look at how to transfer the reissuance tokens.</p>
<p>Let’s send the reissuance token from Alice to Bob so that Bob can reissue some “demoasset” himself. Note that if there was always going to be a need for them both to reissue the asset at the same time, we could have just created two reissuance tokens and initially sent one to Bob, leaving Alice still holding the other. Either way, we would need to send from one wallet to the other, so let’s begin. First we’ll double check that Alice’s wallet currently holds the reissuance token and Bob’s does not:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getwalletinfo
Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>Alice’s wallet has “bitcoin”, “demoasset” and the demo asset’s reissuance token whereas Bob’s only has “bitcoin”.</p>
<p>We’ll just prove that the token is needed to reissue by trying to reissue from Bob’s wallet without the token:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli reissueasset <span class="nv">$ASSET</span> <span class="m">10</span>
</pre></div>
</div>
<p>That fails as expected and gives the following error message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>No available reissuance tokens in wallet.
</pre></div>
</div>
<p>So let’s send the reissuance token to Bob so that he can reissue some of our “demoasset”. Have Bob’s wallet generate a new address and save it in a variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RITRECADD</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
</pre></div>
</div>
<p>Send the token from Alice’s wallet to Bob’s new address as if it were any other asset. We’ll use the hex of the token to say what type of asset we are sending and also generate a block so the transaction confirms:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli sendtoaddress <span class="nv">$RITRECADD</span> <span class="m">1</span> <span class="s2">&quot;&quot;</span> <span class="s2">&quot;&quot;</span> <span class="nb">false</span> <span class="nb">false</span> <span class="m">1</span> UNSET <span class="nv">$TOKEN</span>
Alice:~$ elements-cli generatetoaddress <span class="m">1</span> <span class="nv">$ADDRGEN</span>
</pre></div>
</div>
<p>Check that Bob’s wallet now has the token and that Alice’s no longer does:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getwalletinfo
Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>The token and right to reissue it provides is now Bob’s!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Remember from an earlier note that we can divide a reissuance token like any other asset in Liquid. Our send of “1” token in this instance actually transferred 100,000,000 of the smallest possible amount of the token. You can try sending something like “0.1” of the token back to Alice and check if she is again able to reissue (she will and so will Bob, who will still hold “0.9”).</p>
</div>
<p>Bob still doesn’t have any of the “demoasset” itself yet but, now that his wallet holds the reissuance token, he can reissue any amount of “demoasset” and it will show in his wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RISSUE</span><span class="o">=</span><span class="k">$(</span>elements-cli reissueasset <span class="nv">$ASSET</span> <span class="m">10</span><span class="k">)</span>
Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>Bob’s wallet now has “bitcoin”, the reissuance token for our new asset, and an amount of the new asset itself:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;balance&quot;: {
  &quot;bitcoin&quot;: 10499998.99841940,
  &quot;78ee1e3b9f2edf730e7f624e9d0f92d3e1d364c0ee91525bbccf56377dcd5033&quot;: 1.00000000,
  &quot;600010d2a60cf0d9395dced79af3ccdb7c908e80cddf125ed1af80dc87186aae&quot;: 10.00000000
},
</pre></div>
</div>
<p>Remember that the new asset we issued will still only display using its hex value in Bob’s wallet as we didn’t assign it a label like we did in Alice’s wallet. In order for Alice to see this reissuance we need to make her wallet aware of it. Show that Alice’s wallet can’t see it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>Import the address so that it can:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RITXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Bob:~$ <span class="nv">RIADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli gettransaction <span class="nv">$RITXID</span> <span class="p">|</span> jq <span class="s1">&#39;.details[0].address&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ elements-cli importaddress <span class="nv">$RIADDR</span>
</pre></div>
</div>
<p>Now Alice’s wallet can see the reissuance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>As expected though, the amounts are blinded. You can unblind by importing the blinding key as we did earlier should you want to.</p>
<p>In Liquid you can also carry out an unblinded asset issue:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">UBRISSUE</span><span class="o">=</span><span class="k">$(</span>elements-cli issueasset <span class="m">55</span> <span class="m">1</span> <span class="nb">false</span><span class="k">)</span>
Bob:~$ <span class="nv">UBASSET</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UBRISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.asset&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Which shows up as normal in Bob’s wallet after he issues it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>And this time if we import the address into Alice’s wallet she should be able to see the amount issued, proving it was issued unblinded. Following the same process as before to import the address into Alice’s wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
Bob:~$ <span class="nv">UBRITXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UBRISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Bob:~$ <span class="nv">UBRIADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli gettransaction <span class="nv">$UBRITXID</span> <span class="p">|</span> jq <span class="s1">&#39;.details[0].address&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ elements-cli importaddress <span class="nv">$UBRIADDR</span>
</pre></div>
</div>
<p>We can now see that Alice’s wallet can see both the issuance and the amount issued (55) without the need to import the blinding key:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>It may also be necessary to destroy asset amounts as well as create them in an Liquid based blockchain. This is easily done using the “destroyamount” command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli destroyamount <span class="nv">$UBASSET</span> <span class="m">5</span>
</pre></div>
</div>
<p>Check the amount has gone from the 55 issued down to 50:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>It will show the amount as 50, proving that an amount of 5 were indeed destroyed:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;balance&quot;: {
  &quot;4021bf6faac59d7ec593859a741318752f72e637e7d5ecfa54725dba1508771b&quot;: 50.00000000,
</pre></div>
</div>
<p>Creating, reissuing and destroying assets is a key feature of Liquid that can help you reflect the real world movement of assets or tokens on another blockchains etc.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Randy McMillan.
      Last updated on 08Nov2020.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/jquery.fancybox.min.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  <script type="text/javascript">
    $(function(){
      $('.image-reference').fancybox();
    })
  </script>

</body>
</html>