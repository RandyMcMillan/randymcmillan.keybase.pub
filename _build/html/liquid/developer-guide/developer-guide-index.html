


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Developer Guide &mdash; R A N D Y M c M I L L A N</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/jquery.fancybox.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/glpi.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="R A N D Y M c M I L L A N" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            
            <img src="../../_static/images/glpi.png" class="logo" />
          
          </a>

          
            
              <div class="version">
                16048895284770

                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">twitter.com</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://twitter.com/randymcmillan">/randymcmillan</a></li>
</ul>
<p class="caption"><span class="caption-text">keybase.io</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/randymcmillan">/randymcmillan</a></li>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/team/bitcoincore">/bitcoincore</a></li>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/team/bitcoinand">/bitcoinAnd</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html"></a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Developer Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developer-guide">
<span id="id1"></span><h1>Developer Guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<p>The code examples listed below show you how to make use of the most common features of Liquid. Each example uses the command line and the Liquid Client application (elements-cli) to issue commands to either the Liquid daemon (elementsd) or Liquid Core GUI (elements-qt), depending on which you are running.</p>
<p>The example code can be modified to work in other languages like Python, C#, Ruby, Go, Perl, and Java by following the steps in the <a class="reference internal" href="../app-examples/app-examples-index.html#liquid-app-examples"><span class="std std-ref">App Examples</span></a> section and issuing the appropriate RPC commands to Liquid using your chosen language instead of via elements-cli.</p>
<p>It is also worth noting that any examples on the <a class="reference external" href="https://elementsproject.org/elements-code-tutorial/application-development">Elements website</a> will also work on Liquid, as Liquid is built using the Elements codebase. The Elements website also includes instructions on how to run all the <a class="reference external" href="https://elementsproject.org/elements-code-tutorial/easy-run-code">basic</a> and more <a class="reference external" href="https://elementsproject.org/elements-code-tutorial/advanced-examples">advanced</a> code examples listed here (and more) from within one file, that you can copy and paste and run from the terminal.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#basic-commands" id="id2">Basic Commands</a></p></li>
<li><p><a class="reference internal" href="#confidential-transactions" id="id3">Confidential Transactions</a></p></li>
<li><p><a class="reference internal" href="#issued-assets" id="id4">Issued Assets</a></p></li>
<li><p><a class="reference internal" href="#reissuing-assets" id="id5">Reissuing Assets</a></p></li>
<li><p><a class="reference internal" href="#creating-raw-transactions" id="id6">Creating Raw Transactions</a></p></li>
<li><p><a class="reference internal" href="#creating-raw-issuances" id="id7">Creating Raw Issuances</a></p></li>
<li><p><a class="reference internal" href="#proof-of-issuance-blockstream-s-liquid-asset-registry" id="id8">Proof of Issuance - Blockstream’s Liquid Asset Registry</a></p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="basic-commands">
<h2><a class="toc-backref" href="#id2">Basic Commands</a><a class="headerlink" href="#basic-commands" title="Permalink to this headline">¶</a></h2>
<p>The Liquid Client (elements-cli) application allows you to issue Remote Procedure Call (RPC) commands to the Liquid Daemon (elementsd) or Liquid Core GUI (elements-qt) from the terminal.</p>
<p>A full list of all the commands you can issue over RPC can be be seen by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>elements-cli <span class="nb">help</span>
</pre></div>
</div>
<p>To see further information on how to use a certain command you can append the name of the command like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>elements-cli <span class="nb">help</span> sendtoaddress
</pre></div>
</div>
<p>This returns examples of how to use the command, a list of arguments that can be passed to it and and the format of the results returned.</p>
<p>If you run the above code you will see that the sendtoaddress accepts 2 mandatory arguments and has 8 additional optional arguments.</p>
<p>For example, to use the sendtoaddress command to send an amount of 1 L-BTC and subtract the fee from the amount being sent we would run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>elements-cli sendtoaddress AzppUfWkYpjiThupf2t6Kn1yPTgseg3buBexuMSbZxpPWAsQcucHXFpr4HHGFQAiyBiddvcjAYyoVeMD <span class="m">1</span> <span class="s2">&quot;&quot;</span> <span class="s2">&quot;&quot;</span> <span class="nb">true</span>
</pre></div>
</div>
<p>The result returned from sendtoaddress is the transaction id. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>466c7da2555f0e1e8eff0188cbf7ba0e44fae03a61b81a1226c34ed785e4bb58
</pre></div>
</div>
<p>The result was returned as a string value. Many results are returned as JSON formatted data however. Using getwalletinfo as an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>elements-cli getwalletinfo
</pre></div>
</div>
<p>This returns JSON formatted data similar to that below:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;walletname&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;walletversion&quot;</span><span class="p">:</span> <span class="mi">169900</span><span class="p">,</span>
  <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;bitcoin&quot;</span><span class="p">:</span> <span class="mf">100.00000000</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="nt">&quot;unconfirmed_balance&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;bitcoin&quot;</span><span class="p">:</span> <span class="mf">0.00000000</span>
  <span class="p">},</span>
  <span class="nt">&quot;immature_balance&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;bitcoin&quot;</span><span class="p">:</span> <span class="mf">0.00000000</span>
  <span class="p">},</span>
  <span class="nt">&quot;txcount&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nt">&quot;keypoololdest&quot;</span><span class="p">:</span> <span class="mi">1557907592</span><span class="p">,</span>
  <span class="nt">&quot;keypoolsize&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="nt">&quot;keypoolsize_hd_internal&quot;</span><span class="p">:</span> <span class="mi">999</span><span class="p">,</span>
  <span class="nt">&quot;paytxfee&quot;</span><span class="p">:</span> <span class="mf">0.00000000</span><span class="p">,</span>
  <span class="nt">&quot;hdseedid&quot;</span><span class="p">:</span> <span class="s2">&quot;17cea58f08ed56e975216699061df4a75002fcf8&quot;</span><span class="p">,</span>
  <span class="nt">&quot;hdmasterkeyid&quot;</span><span class="p">:</span> <span class="s2">&quot;17cea58f08ed56e975216699061df4a75002fcf8&quot;</span><span class="p">,</span>
  <span class="nt">&quot;private_keys_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the remaining code examples we will continue using the terminal and the elements-cli application to send commands to elementsd. Other languages can be used to send RPC commands as mentioned previously.</p>
<hr class="docutils" />
</div>
<div class="section" id="confidential-transactions">
<span id="to-confidential-transactions"></span><h2><a class="toc-backref" href="#id3">Confidential Transactions</a><a class="headerlink" href="#confidential-transactions" title="Permalink to this headline">¶</a></h2>
<p>All addresses in Liquid are, by default, blinded using Confidential Transactions. Blinding is the process by which the amount and type of asset being transferred is cryptographically hidden from everyone except the sending and receiving parties. This is done using a blinding key, which we will look at later.</p>
<p>Imagine that our cryptographic friends Alice and Bob are running Liquid nodes. We’ll have Bob send some assets to himself using a blinded Liquid address as the destination.</p>
<p>First Bob will generate a new address and store it in a variable named “ADDR” so he can recall it for use later:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">ADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
</pre></div>
</div>
<p>To see the new address Bob created he can print out the value that was stored in the “ADDR” variable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nb">echo</span> <span class="nv">$ADDR</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We will use the “store the value returned from an RPC command in a variable for future use” technique throughout the rest of the code examples. We’ll print out the contents of a variable every now and again when highlighting something that has been returned. You can always just echo out the contents of any others as we go along should you want to.</p>
</div>
<p>After running the echo command above you should see something similar to this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Azpr7BwzjwdiB1pNZKcLkk6Esn5NWAE7wtrC4UzEsshpKe3eUZzPQBvfJ7q9wzJLbt9yn8hYZmZDayGG
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As of Liquid v0.17, getnewaddress defaults to creating P2SH-P2WPKH addresses. You can create “CTE” prefixed addresses (the default for versions of Liquid previous to 0.17) by calling getnewaddress like this: <code class="docutils literal notranslate"><span class="pre">elements-cli</span> <span class="pre">getnewaddress</span> <span class="pre">&quot;&quot;</span> <span class="pre">legacy</span></code>. You can also set the <code class="docutils literal notranslate"><span class="pre">addresstype=legacy</span></code> argument on node startup, or set it in your config file to always get legacy addresses from “getnewaddress”. Some commands require a “legacy” style address in order to work, such as message signing.</p>
</div>
<p>Let’s look at the address in more detail to check that it is indeed a confidential one. To do this we can use the “getaddressinfo” command, passing in the address that we stored in the ADDR variable as a parameter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ getaddressinfo <span class="nv">$ADDR</span>
</pre></div>
</div>
<p>You should see a long value for the “confidential_key” property within the JSON formatted results. It will look something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;confidential_key&quot;: &quot;030788da8d9ca229cbe57e346daaf8d94cba3ed548b41922a8abefaec91ff1abb1&quot;
</pre></div>
</div>
<p>The confidential_key is the public blinding key, which has been added to the address and is the reason why a confdential address is so long. You will also see that the “getaddressinfo” command shows an associated “unconfidential” address, which can be used to receive assets if you don’t want to make use of the Confidential Transaction feature for some reason.</p>
<p>We’ll now send an amount of 1 “bitcoin” (L-BTC) from Bob’s wallet to the new address we generated for him:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">TXID</span><span class="o">=</span><span class="k">$(</span>elements-cli sendtoaddress <span class="nv">$ADDR</span> <span class="m">1</span><span class="k">)</span>
</pre></div>
</div>
<p>In order to have the transaction confirm we need a block to be generated. As an aside, at this stage we can query the mempool of each of our Liquid nodes to see the transaction waiting to be added to a block, as well as the current block count of each node’s blockchain:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getrawmempool
Bob:~$ elements-cli getrawmempool
Alice:~$ elements-cli getblockcount
Bob:~$ elements-cli getblockcount
</pre></div>
</div>
<p>Both should display results including the transaction with the same ID as that stored in the “TXID” variable and the same block count value. Once a new block has been created, we can check the mempool again for each client to see that the transaction has been confirmed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli generatetoaddress <span class="m">1</span> <span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
Alice:~$ elements-cli getrawmempool
Bob:~$ elements-cli getrawmempool
Alice:~$ elements-cli getblockcount
Bob:~$ elements-cli getblockcount
</pre></div>
</div>
<p>Note that although Bob sent an amount of 1 L-BTC to himself the net effect is that he now has slightly less than he did before, this is because some of the transaction amount was spent on fees that have yet to mature and be seen as spendable.</p>
<p>The above shows that the client’s blockchains and mempools are in sync. If they are not, wait a few seconds and try the calls above again as it may take a moment for the nodes to synchronize. They display the same results because they are connected nodes on the same Liquid network and broadcast transactions and blocks between each other in very much the same was as Bitcoin nodes do.</p>
<p>Now let’s examine the transaction as it is seen by Bob’s wallet and also how it is seen from the point of view of Alice’s wallet. First the view from Bob’s wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli gettransaction <span class="nv">$TXID</span>
</pre></div>
</div>
<p>The output from that initially looks like just a huge random assortment of letters and numbers (the hex value of the transaction), but if you scroll up you will see some more readable content above that.</p>
<p>Looking in the “details” section near the top, you will see that there are two amount values:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;details&quot;: [
  {
    ...
    &quot;category&quot;: &quot;send&quot;,
    &quot;amount&quot;: -1.00000000,
    ...
  },
  {
    ...
    &quot;category&quot;: &quot;receive&quot;,
    &quot;amount&quot;: 1.00000000,
    ...
  }
]
</pre></div>
</div>
<p>And so we can confirm that Bob’s wallet can view the actual amounts being sent and received in this transaction. This is because the blinded transaction was sent from Bob’s own wallet and so it has access to the required data to unblind the amount values. You will also see two other properties and their values within the two details sections: “amountblinder” and “assetblinder”. These indicate that both the asset amount and the type of asset were blinded. This ensures that wallets without knowledge of the blinding key are prevented from viewing them.</p>
<p>Looking at the transaction from Alice’s wallet, we would expect both amount and type to be unknown as they were sent using a Confidential Transaction.</p>
<p>In order to check Alice’s view of the transaction, we need Alice’s node to use the value of the transaction id that we stored in the TXID variable in Bob’s terminal session. When our code examples use a variable that was set by the other node like this, we will assume that you will set the variable across terminal sessions. This can be done by using echo to print the value within one terminal session, copying the value, and then setting it within the other node’s terminal session, like so:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nb">echo</span> <span class="nv">$TXID</span>
</pre></div>
</div>
<p>Copy the result, which will be similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>533533c5a382ccf14f4b432130f02871091b6a28594a9481da12f360f711685d
</pre></div>
</div>
<p>And then we can set a corresponding variable in Alice’s terminal session, similar to doing the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">TXID</span><span class="o">=</span>533533c5a382ccf14f4b432130f02871091b6a28594a9481da12f360f711685d
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use this technique whenever we need to use a variable set in one terminal session within another.</p>
</div>
<p>This then allows us to run the code below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli gettransaction <span class="nv">$TXID</span>
</pre></div>
</div>
<p>This causes an error. The reason is that Alice’s wallet will not contain wallet details of the transaction as it does not relate to an address contained in her wallet. We can get the raw transaction data from Alice’s node’s copy of the blockchain using the getrawtransaction command like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getrawtransaction <span class="nv">$TXID</span> <span class="m">1</span>
</pre></div>
</div>
<p>That returns raw transaction details. If you look within the “vout” section you can see that there are three instances. The first two instances are the receiving and change amounts and the third is the transaction fee. Of these three amounts, the fee is the only one in which you can see a value, as the fee itself is unblinded. For the first two instances you will see (amongst others) properties with values similar to this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;value-minimum&quot;: 0.00000001,
&quot;value-maximum&quot;: 11258999.06842624,
&quot;amountcommitment&quot;: &quot;0881c61d8a15ad26e6ef621ca99a188ccebbdb348d5285012393459b7e5b1e6113&quot;,
&quot;assetcommitment&quot;: &quot;0b1b7a1a4a604f4a68b3277e3a8926d74e86adce7b92e8e6ba67f9c5a8ad2cbcf4&quot;,
</pre></div>
</div>
<p>What this shows are the “blinded ranges” of the value amounts and the commitment data that acts as proof of the actual amount and type of asset transacted. The raw view of the transaction will be the same accross all nodes, regardless of if they hold the blinding key or not, only the results of gettransaction from a wallet aware of the blinding key used will show the actual amounts.</p>
<p>Even if we were to import Bob’s private key into Alice’s wallet it would still not be able to see the amounts and type of asset using gettransaction because it still has no knowledge of the blinding key used.</p>
<p>If we want to let Alice’s wallet view the actual amount details we’ll need to import the address as ‘watch only’ so gettransaction will work, and then import the blinding key so we can see the unblinded amounts. First, import and then view the transaction. Note the use of the second argument passed to gettransaction, set to true. This tells gettransaction to include watch only addresses, such as the one we imported. Remember to copy the value of $ADDR from Bob’s session and set it in Alice’s before running the code below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli importaddress <span class="nv">$ADDR</span>
Alice:~$ elements-cli gettransaction <span class="nv">$TXID</span> <span class="nb">true</span>
</pre></div>
</div>
<p>This time the call to gettransaction does not error but, because Alice still does not know the blinding key, the amount (towards the top of the output) will show as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;amount&quot;: {
  &quot;bitcoin&quot;: 0.00000000
</pre></div>
</div>
<p>Without knowledge of the Blinding Key, the amount and type of asset being transacted is still hidden.</p>
<p>In order for anyone else apart from the sender and receiver of a Confidential Transaction (such as an auditor) to view the amount and type of assets being transacted, they need to know the blinding key that was used to generate the blinded address. To show this, we can export the blinding key Bob’s wallet used for the related address, import it into Alice’s wallet and try to view the transaction again. Let’s export the key for that particular address from Bob’s wallet and import it into Alice’s.</p>
<p>Export Bob’s blinding key for the address:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">BOBBLINDINGKEY</span><span class="o">=</span><span class="k">$(</span>elements-cli dumpblindingkey <span class="nv">$ADDR</span><span class="k">)</span>
</pre></div>
</div>
<p>Echo, copy and set the variable accross terminal sessions again like we did above (steps not shown) and then import Bob’s blinding key into Alice’s wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli importblindingkey <span class="nv">$ADDR</span> <span class="nv">$BOBBLINDINGKEY</span>
</pre></div>
</div>
<p>Now that Alice’s wallet has knowledge of the blinding key used on that address, we can run the checks we did above from Alice’s wallet, this time expecting to see the actual amount value:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli gettransaction <span class="nv">$TXID</span> <span class="nb">true</span>
</pre></div>
</div>
<p>Magic! Alice’s wallet now shows the actual value sent in the transaction.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;amount&quot;: {
  &quot;bitcoin&quot;: 1.00000000
</pre></div>
</div>
<p>We’ve seen that the use of a blinding key hides the amount and type of assets in an address and that by importing the right blinding key, we can reveal those values. In practical use, a blinding key may be given to an auditor, should there be a need to verify the amounts and types of assets held by a party. The Confidential Transactions feature of Liquid also allows for “range proofs” to be performed without the need to expose actual amounts. This allows statements such as “address abc holds at least an amount x of asset y” to be cryptographically proven as true or false.</p>
</div>
<hr class="docutils" />
<div class="section" id="issued-assets">
<h2><a class="toc-backref" href="#id4">Issued Assets</a><a class="headerlink" href="#issued-assets" title="Permalink to this headline">¶</a></h2>
<p>In this example we’ll issue our own asset, label it, look at the re-issuance token, and learn how to send the asset to other other Liquid nodes and wallet addresses. We’ll also take a look at how to keep track of what assets have been issued and re-issued.</p>
<p>First, let’s take a look at Alice’s wallet to see what it currently holds.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>We see that Alice holds a lot of the “bitcoin” asset and nothing else:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;balance&quot;: {
  &quot;bitcoin&quot;: 101.00000000
}
</pre></div>
</div>
<p>Every asset you issue within Liquid (including the “bitcoin” default) will be assigned its own hex value. This is used to uniquely identify it on the network. Notice how “bitcoin” is displayed with a readable asset name. This is because Liquid automatically associates the label “bitcoin” with the asset hex for that default asset. To find out its hex value we can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli dumpassetlabels
</pre></div>
</div>
<p>Which returns:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;bitcoin&quot;: &quot;cc5fb67403bee3b9a74e7518b7684d6cb64041e4156970a17aa653ee336b1097&quot;
</pre></div>
</div>
<p>One of the main features of Liquid is the ability to issue your own assets.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>There is nothing inherently different between assets in the way they are handled within the Liquid protocol.</p>
</div>
<p>Run the following to perform a blinded issuance of 100 of a new asset, along with 1 reissuance token for the asset.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ISSUE</span><span class="o">=</span><span class="k">$(</span>elements-cli issueasset <span class="m">100</span> <span class="m">1</span><span class="k">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To manually issue an asset using the rawissueasset command, please see the Creating Raw Issuances example. Additionally, the Proof of Issuance example shows how to prove that you were the one who issued the asset using the “contract hash” parameter.</p>
</div>
<p>That will create a new asset type, an initial supply of 100 and also 1 reissuance token. The reissuance token is used to prove authority to reissue more of the asset at a later date. We have issued one such token in the command above. The token is transferable and you can initially create as many as you think you will need based upon how many of the network participants will need to perform this duty. Each asset has its own reissuance token. We’ll look at this in more detail later. It is also possibly to create an asset with no reissuance tokens by using zero for that argument.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The minimum amount of an asset you can issue is 0.00000001. This is also the smallest amount of any issued asset that you can send. The minimum amount of the default asset that you can send (L-BTC) is higher, at 0.00001. These differ as the default asset considers the minimum send amount of the Bitcoin network’s dust limit. The maximum amount of an asset you can issue is 21,000,000 although more can be created by reissuing. When you create the reissuance token as above, where the amount was 1, you are actually creating 100,000,000 of them when measured in their smallest denomination. This is because they are divisible like every other asset on Liquid. The 1 is little more than a user interface concession. For ease of readability we will refer to this issuance as “one token”.</p>
</div>
<p>We have stored all of the returned data from the issuance command in a variable named “ISSUE”, which we’ll pull the hex of the new asset from, storing that value in another variable named “ASSET”. We’ll also store the “token” value (which we’ll explain and use later) and the “txid” and “vin” of the issuance, which will be used when we try and unblind the issuing transaction shortly.</p>
<p>In order to do this we can use a tool called <a class="reference external" href="https://stedolan.github.io/jq/">jq</a> (which we installed as part of the tutorial dependencies) to strip out and store only the parts returned and saved within “ISSUE” that we are interested in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ASSET</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.asset&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.token&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">ITXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">IVIN</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.vin&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>To see the hex identifier for the asset we issued run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nb">echo</span> <span class="nv">$ASSET</span>
</pre></div>
</div>
<p>Which will return something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>f0379482f9b77917670be0f060cc58debc6d93db0bf857458d5fb19080c8ab67
</pre></div>
</div>
<p>In order to view all asset issuances that have been made we run the “listissuances” command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>That will show the asset we just issued. You’ll notice tha it has the following property:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;isreissuance&quot;: false,
</pre></div>
</div>
<p>This indicates that it was an original issuance and not a reissuances. You’ll also see that the newly issued asset does not have an “assetlabel”.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Asset labels are not part of network protocol consensus and are local only to each node. You should not rely on them for transaction processing but instead use the asset’s hex value, which is shared across the network.</p>
</div>
<p>You can set the label by assigning it against the hex identifier of the asset. This can be done in the relevant Liquid.conf file by adding a line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>assetdir=asset_hex_here:your_label_here
</pre></div>
</div>
<p>Or you can do this by passing in “assetdir” as a parameter when you start the node. We’ll do this now and call our new asset “demoasset”. We need to stop the node first.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli stop
Alice:~$ elementsd -assetdir<span class="o">=</span><span class="nv">$ASSET</span>:demoasset
Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>This shows that the asset we issued has the label we assigned to its hex value:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;assetlabel&quot;: &quot;demoasset&quot;,
</pre></div>
</div>
<p>Having labelled our asset for ease of reference, we will now look at the issuance data for “demoasset” in more detail. You will notice a “token” property similar to that below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;token&quot;: &quot;33244cc19dd9df0fd901e27246e3413c8f6a560451e2f3721fb6f636791087c7&quot;,
</pre></div>
</div>
<p>This is the hex of the token and it can be used to reissue the asset. Yours will likely differ from the actual value above. There is also a “tokenamount” property which corresponds to the amount we created:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;tokenamount&quot;: 1.00000000,
</pre></div>
</div>
<p>When the transaction has confirmed, we can take a look using Bob’s wallet to see if it is aware of Alice’s asset issuance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli listissuances
</pre></div>
</div>
<p>Bob’s wallet isn’t aware of the issuance, so we’ll import the address into his wallet.</p>
<p>In order to check Bob’s view of the issuance, we need Bob’s node to use the address used when Alice issued the asset. As that’s currently known to Alice’s node, we need to copy the information over to Bob’s node. This can be done by using echo to print the value within one terminal session, copying the value, and then setting it within the other node’s terminal session, like so:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">IADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli gettransaction <span class="nv">$ITXID</span> <span class="p">|</span> jq <span class="s1">&#39;.details[0].address&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nb">echo</span> <span class="nv">$IADDR</span>
</pre></div>
</div>
<p>Copy the result, which will be similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AzpkDFjr6nNm4nncoBHuZr5S2zH4wPEpTvU63M8jNuU7JMXAVb5rVNCYmLB3fTmP9kLGgTAdCTwrrndu
</pre></div>
</div>
<p>And then we can set a corresponding variable in Bob’s terminal session, similar to doing the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">IADDR</span><span class="o">=</span>AzpkDFjr6nNm4nncoBHuZr5S2zH4wPEpTvU63M8jNuU7JMXAVb5rVNCYmLB3fTmP9kLGgTAdCTwrrndu
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use this technique whenever we need to use a variable set in one terminal session within another.</p>
</div>
<p>Bob can now import the address relating to Alice’s issuance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli importaddress <span class="nv">$IADDR</span>
</pre></div>
</div>
<p>If we try and view the list of issuances from Bob’s node now we’ll see the issuance, but notice that the amount of the asset and the amount of its associated token are hidden:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli listissuances
</pre></div>
</div>
<p>The asset amount and the token amount are both blinded and show as -1:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;tokenamount&quot;: -1,
&quot;assetamount&quot;: -1,
</pre></div>
</div>
<p>In the Confidential Transactions example, we were able to expose the amount and type of asset being sent in a regular Confidential Transaction by exporting the blinding key used to create the blinded address and importing it into another wallet. We can do the same type of thing with the issuance transaction using the issuance blinding key.</p>
<p>First, we need to export the issuance blinding key. We refer to issuances by their txid/vin pair. As there is only one per input it will be zero, but we’ll use the value we saved earlier as it is good practice to not rely on such things staying fixed. You will need to echo, copy and create the appropriate variables (ISSUEKEY, ITXID, IVIN) in Bob’s node as we did above for this to work (steps not shown).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ISSUEKEY</span><span class="o">=</span><span class="k">$(</span>elements-cli dumpissuanceblindingkey <span class="nv">$ITXID</span> <span class="nv">$IVIN</span><span class="k">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli importissuanceblindingkey <span class="nv">$ITXID</span> <span class="nv">$IVIN</span> <span class="nv">$ISSUEKEY</span>
</pre></div>
</div>
<p>Now when we run the command to list known issuances from Bob’s wallet we should see the actual values:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli listissuances
</pre></div>
</div>
<p>Which returns:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;tokenamount&quot;: 1.00000000,
&quot;assetamount&quot;: 100.00000000,
</pre></div>
</div>
<p>Indeed, Bob’s wallet can now see both the amount of the asset and its reissuance token that were issued.</p>
<p>Just like any other asset in Liquid, we can send our “demoasset” from Alice’s address to Bob’s using the “sendtoaddress” command. This differs from its implementation in Bitcoin’s source code in that it accepts an additional parameter, which allows you to specify the type of asset to be sent. Be aware that the step above where we imported the issuance blinding key is not required in order to transact an issued asset between addresses and wallets. Importing the issuance blinding key just enables another wallet to view the issuance details in full.</p>
<p>You will need to echo, copy and create the appropriate variable (BOBDEMOADD) in Alice’s node as we did above for this to work (steps not shown).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">BOBDEMOADD</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli sendtoaddress <span class="nv">$BOBDEMOADD</span> <span class="m">10</span> <span class="s2">&quot;&quot;</span> <span class="s2">&quot;&quot;</span> <span class="nb">false</span> <span class="nb">false</span> <span class="m">1</span> UNSET demoasset
</pre></div>
</div>
<p>After confirmation, Bob’s wallet will now show an amount of 10 “demoasset” and Alice’s will show 90:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli getwalletinfo
Alice:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>As we didn’t assign a label in Bob’s node for the asset we created, it will be identified by its hex value instead. We will therefore have to use the hex identifier instead of the asset label when we send it from his node. Remember that asset labels are local only to each node and are not part of the network’s protocol rules. We’ll demonstrate how Bob can send the asset using the hex value by transferring the 10 “demoasset” back to Alice:</p>
<p>You will need to echo, copy and create the appropriate variable (ALICEDEMOADD) in Bob’s node as we did above for this to work (steps not shown).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ALICEDEMOADD</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli sendtoaddress <span class="nv">$ALICEDEMOADD</span> <span class="m">10</span> <span class="s2">&quot;&quot;</span> <span class="s2">&quot;&quot;</span> <span class="nb">false</span> <span class="nb">false</span> <span class="m">1</span> UNSET <span class="nv">$ASSET</span>
Bob:~$ <span class="nv">ADDRGEN</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
Bob:~$ elements-cli generatetoaddress <span class="m">1</span> <span class="nv">$ADDRGEN</span>
</pre></div>
</div>
<p>We should see that Bob’s wallet has no “demoasset” in it anymore and Alice’s is back to 100:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli getwalletinfo
Alice:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>We can see that is indeed the case.</p>
</div>
<hr class="docutils" />
<div class="section" id="reissuing-assets">
<h2><a class="toc-backref" href="#id5">Reissuing Assets</a><a class="headerlink" href="#reissuing-assets" title="Permalink to this headline">¶</a></h2>
<p>In this section we’ll look at reissuing an amount of the asset we previously issued. We’ll re-use the asset hex we stored in the “ASSET” variable. Reissuing just means “creating some more of” in this context. For future use, we’ll store the result of the “reissueasset” command in a variable named “RTRANS” and from that, strip out the transaction ID, storing it in another variable named “RTXID”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">RTRANS</span><span class="o">=</span><span class="k">$(</span>elements-cli reissueasset <span class="nv">$ASSET</span> <span class="m">99</span><span class="k">)</span>
Alice:~$ <span class="nv">RTXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RTRANS</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>We’ve just created 99 more units of our new asset. As an aside, because we already labelled the asset in the previous example, we could have also passed “demoasset” in as the first parameter instead of the hex identifier and it would have worked exactly the same.</p>
<p>To check this issuance history of our asset (and ignore the “bitcoin” issuance) we can run the “listissuances” command and specify the asset we are interested in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances <span class="nv">$ASSET</span>
</pre></div>
</div>
<p>For the above command you may also pass the asset label in instead of the hex value. As has been noted before, be aware that labels are stored locally and are not network-wide.</p>
<p>Along with the original issuance you should see a new entry with the following property:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;isreissuance&quot;: true,
</pre></div>
</div>
<p>This property allows us to differentiate between initial issuances and reissuances. Note that the transaction id where amounts of the asset were created is also included in the returned data.</p>
<p>Let’s look at the details of the transaction where we reissued our asset:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli gettransaction <span class="nv">$RTXID</span>
</pre></div>
</div>
<p>Scroll to the top of the returned transaction data as there are a few things worth noting here. The first is that within the “amount” section we can see that 0 “bitcoin” and 99 “demoasset” were transacted:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;amount&quot;: {
  &quot;bitcoin&quot;: 0.00000000,
  &quot;33244cc19dd9df0fd901e27246e3413c8f6a560451e2f3721fb6f636791087c7&quot;: 0.00000000,
  &quot;demoasset&quot;: 99.00000000,
</pre></div>
</div>
<p>This information suggests that an Liquid transaction can transact more than one type of asset within the same transaction, which is indeed the case.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To send different types of asset in the same transaction, the “sendmany” command is used. The syntax is the same as in Bitcoin.</p>
</div>
<p>The “amount” section shows the net effect of the transaction as: 0 “bitcoin”, 99 “demoasset” and also another asset that is 0. That unlabelled asset is our reissuance token (the hex for which will differ from that above but the results are otherwise the same). What this shows is that once the sent and received amounts are totalled we have created 99 “demoasset”. You can see how the values in the “amount” section are derived by scrolling down the returned data and looking within the “details” section.</p>
<p>You will see that amounts of 99 “demoasset” and 1 reissuance token were sent:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;category&quot;: &quot;send&quot;,
&quot;amount&quot;: -99.00000000,

&quot;category&quot;: &quot;send&quot;,
&quot;amount&quot;: -1.00000000,
</pre></div>
</div>
<p>And that further on the same amounts were received:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;category&quot;: &quot;receive&quot;,
&quot;amount&quot;: 99.00000000,

&quot;category&quot;: &quot;receive&quot;,
&quot;amount&quot;: 1.00000000,
</pre></div>
</div>
<p>We can see how the “amount” section above therefore lists the net transfer of 0 (-1 +1) tokens. The reason why the net of this is the creation of 99 new “demoasset” is that the “reissueasset” command essentially spends from a zero balance address, and so the received amount has the effect of creating 99 new “demoasset”. The 99 new “demoasset” are basically spent into existence. It is worth highlighting again that in order to reissue an asset you must hold a related reissuance token. They must therefore be allocated wisely.</p>
<p>To check that the blinding works the same for a reissuance transaction as it does for a normal transaction we can check Bob’s view of Alice’s reissuance transaction. Wait until a block is confirmed to let the nodes sync, then run the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RAWRTRANS</span><span class="o">=</span><span class="k">$(</span>elements-cli getrawtransaction <span class="nv">$RTXID</span><span class="k">)</span>
Bob:~$ elements-cli decoderawtransaction <span class="nv">$RAWRTRANS</span>
</pre></div>
</div>
<p>We can see that the amounts and asset types are indeed blinded with results like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;value-minimum&quot;: 0.00000001,
&quot;value-maximum&quot;: 42.94967296,
</pre></div>
</div>
<p>You could unblind these using the techniques we used for the initial issuance should you want to.</p>
<p>We have seen that reissuance is just a special kind of spending transaction whereby you can create more of the original asset, so long as you hold a valid reissuance token in your wallet. Next we will look at how to transfer the reissuance tokens.</p>
<p>Let’s send the reissuance token from Alice to Bob so that Bob can reissue some “demoasset” himself. Note that if there was always going to be a need for them both to reissue the asset at the same time, we could have just created two reissuance tokens and initially sent one to Bob, leaving Alice still holding the other. Either way, we would need to send from one wallet to the other, so let’s begin. First we’ll double check that Alice’s wallet currently holds the reissuance token and Bob’s does not:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getwalletinfo
Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>Alice’s wallet has “bitcoin”, “demoasset” and the demo asset’s reissuance token whereas Bob’s only has “bitcoin”.</p>
<p>We’ll just prove that the token is needed to reissue by trying to reissue from Bob’s wallet without the token:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli reissueasset <span class="nv">$ASSET</span> <span class="m">10</span>
</pre></div>
</div>
<p>That fails as expected and gives the following error message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>No available reissuance tokens in wallet.
</pre></div>
</div>
<p>So let’s send the reissuance token to Bob so that he can reissue some of our “demoasset”. Have Bob’s wallet generate a new address and save it in a variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RITRECADD</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
</pre></div>
</div>
<p>Send the token from Alice’s wallet to Bob’s new address as if it were any other asset. We’ll use the hex of the token to say what type of asset we are sending and also generate a block so the transaction confirms:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli sendtoaddress <span class="nv">$RITRECADD</span> <span class="m">1</span> <span class="s2">&quot;&quot;</span> <span class="s2">&quot;&quot;</span> <span class="nb">false</span> <span class="nb">false</span> <span class="m">1</span> UNSET <span class="nv">$TOKEN</span>
Alice:~$ elements-cli generatetoaddress <span class="m">1</span> <span class="nv">$ADDRGEN</span>
</pre></div>
</div>
<p>Check that Bob’s wallet now has the token and that Alice’s no longer does:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getwalletinfo
Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>The token and right to reissue it provides is now Bob’s!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Remember from an earlier note that we can divide a reissuance token like any other asset in Liquid. Our send of “1” token in this instance actually transferred 100,000,000 of the smallest possible amount of the token. You can try sending something like “0.1” of the token back to Alice and check if she is again able to reissue (she will and so will Bob, who will still hold “0.9”).</p>
</div>
<p>Bob still doesn’t have any of the “demoasset” itself yet but, now that his wallet holds the reissuance token, he can reissue any amount of “demoasset” and it will show in his wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RISSUE</span><span class="o">=</span><span class="k">$(</span>elements-cli reissueasset <span class="nv">$ASSET</span> <span class="m">10</span><span class="k">)</span>
Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>Bob’s wallet now has “bitcoin”, the reissuance token for our new asset, and an amount of the new asset itself:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;balance&quot;: {
  &quot;bitcoin&quot;: 10499998.99841940,
  &quot;78ee1e3b9f2edf730e7f624e9d0f92d3e1d364c0ee91525bbccf56377dcd5033&quot;: 1.00000000,
  &quot;600010d2a60cf0d9395dced79af3ccdb7c908e80cddf125ed1af80dc87186aae&quot;: 10.00000000
},
</pre></div>
</div>
<p>Remember that the new asset we issued will still only display using its hex value in Bob’s wallet as we didn’t assign it a label like we did in Alice’s wallet. In order for Alice to see this reissuance we need to make her wallet aware of it. Show that Alice’s wallet can’t see it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>Import the address so that it can:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">RITXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Bob:~$ <span class="nv">RIADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli gettransaction <span class="nv">$RITXID</span> <span class="p">|</span> jq <span class="s1">&#39;.details[0].address&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ elements-cli importaddress <span class="nv">$RIADDR</span>
</pre></div>
</div>
<p>Now Alice’s wallet can see the reissuance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>As expected though, the amounts are blinded. You can unblind by importing the blinding key as we did earlier should you want to.</p>
<p>In Liquid you can also carry out an unblinded asset issue:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ <span class="nv">UBRISSUE</span><span class="o">=</span><span class="k">$(</span>elements-cli issueasset <span class="m">55</span> <span class="m">1</span> <span class="nb">false</span><span class="k">)</span>
Bob:~$ <span class="nv">UBASSET</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UBRISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.asset&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Which shows up as normal in Bob’s wallet after he issues it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>And this time if we import the address into Alice’s wallet she should be able to see the amount issued, proving it was issued unblinded. Following the same process as before to import the address into Alice’s wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
Bob:~$ <span class="nv">UBRITXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UBRISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Bob:~$ <span class="nv">UBRIADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli gettransaction <span class="nv">$UBRITXID</span> <span class="p">|</span> jq <span class="s1">&#39;.details[0].address&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ elements-cli importaddress <span class="nv">$UBRIADDR</span>
</pre></div>
</div>
<p>We can now see that Alice’s wallet can see both the issuance and the amount issued (55) without the need to import the blinding key:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli listissuances
</pre></div>
</div>
<p>It may also be necessary to destroy asset amounts as well as create them in an Liquid based blockchain. This is easily done using the “destroyamount” command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli destroyamount <span class="nv">$UBASSET</span> <span class="m">5</span>
</pre></div>
</div>
<p>Check the amount has gone from the 55 issued down to 50:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Bob:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>It will show the amount as 50, proving that an amount of 5 were indeed destroyed:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;balance&quot;: {
  &quot;4021bf6faac59d7ec593859a741318752f72e637e7d5ecfa54725dba1508771b&quot;: 50.00000000,
</pre></div>
</div>
<p>Creating, reissuing and destroying assets is a key feature of Liquid that can help you reflect the real world movement of assets or tokens on another blockchains etc.</p>
</div>
<hr class="docutils" />
<div class="section" id="creating-raw-transactions">
<h2><a class="toc-backref" href="#id6">Creating Raw Transactions</a><a class="headerlink" href="#creating-raw-transactions" title="Permalink to this headline">¶</a></h2>
<p>In this example we will create a raw transaction sending some of an issued asset.</p>
<p>Issue an asset and get the asset hex so we can send some:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ISSUE</span><span class="o">=</span><span class="k">$(</span>elements-cli issueasset <span class="m">100</span> <span class="m">1</span><span class="k">)</span>
Alice:~$ <span class="nv">ASSET</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$ISSUE</span> <span class="p">|</span> jq <span class="s1">&#39;.asset&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Check the asset shows up in our wallet:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli getwalletinfo
</pre></div>
</div>
<p>Get a list of unspent we can use as inputs, referenced via transaction id, vout and amount:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">UTXO</span><span class="o">=</span><span class="k">$(</span>elements-cli listunspent <span class="m">0</span> <span class="m">0</span> <span class="o">[]</span> <span class="nb">true</span> <span class="s1">&#39;&#39;&#39;{&quot;&#39;&#39;asset&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$ASSET</span><span class="s1">&#39;&#39;&#39;&quot;}&#39;&#39;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">TXID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UTXO</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].txid&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span> <span class="k">)</span>
Alice:~$ <span class="nv">VOUT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UTXO</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].vout&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span> <span class="k">)</span>
Alice:~$ <span class="nv">AMOUNT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UTXO</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].amount&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span> <span class="k">)</span>
</pre></div>
</div>
<p>Get an address to send the asset to, we’ll use an unconfidential address:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
Alice:~$ <span class="nv">VALIDATEADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli validateaddress <span class="nv">$ADDR</span><span class="k">)</span>
Alice:~$ <span class="nv">UNCONADDR</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VALIDATEADDR</span> <span class="p">|</span> jq <span class="s1">&#39;.unconfidential&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Build the raw transaction, sending an amount of 3 of the asset:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">SENDAMOUNT</span><span class="o">=</span><span class="s2">&quot;3.00&quot;</span>
Alice:~$ <span class="nv">RAWTX</span><span class="o">=</span><span class="k">$(</span>elements-cli createrawtransaction <span class="s1">&#39;&#39;&#39;[{&quot;&#39;&#39;txid&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$TXID</span><span class="s1">&#39;&#39;&#39;&quot;, &quot;&#39;&#39;vout&#39;&#39;&quot;:&#39;</span><span class="nv">$VOUT</span><span class="s1">&#39;, &quot;&#39;&#39;asset&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$ASSET</span><span class="s1">&#39;&#39;&#39;&quot;}]&#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;{&quot;&#39;&#39;&#39;</span><span class="nv">$UNCONADDR</span><span class="s1">&#39;&#39;&#39;&quot;:&#39;</span><span class="nv">$SENDAMOUNT</span><span class="s1">&#39;}&#39;&#39;&#39;</span> <span class="m">0</span> <span class="nb">false</span> <span class="s1">&#39;&#39;&#39;{&quot;&#39;&#39;&#39;</span><span class="nv">$UNCONADDR</span><span class="s1">&#39;&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$ASSET</span><span class="s1">&#39;&#39;&#39;&quot;}&#39;&#39;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Fund the transaction:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">FRT</span><span class="o">=</span><span class="k">$(</span>elements-cli fundrawtransaction <span class="nv">$RAWTX</span><span class="k">)</span>
</pre></div>
</div>
<p>Blind and sign the transaction:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">HEXFRT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$FRT</span> <span class="p">|</span> jq <span class="s1">&#39;.hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">BRT</span><span class="o">=</span><span class="k">$(</span>elements-cli blindrawtransaction <span class="nv">$HEXFRT</span><span class="k">)</span>
Alice:~$ <span class="nv">SRT</span><span class="o">=</span><span class="k">$(</span>elements-cli signrawtransactionwithwallet <span class="nv">$BRT</span><span class="k">)</span>
Alice:~$ <span class="nv">HEXSRT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$SRT</span> <span class="p">|</span> jq <span class="s1">&#39;.hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Send the raw transaction:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">TX</span><span class="o">=</span><span class="k">$(</span>elements-cli sendrawtransaction <span class="nv">$HEXSRT</span><span class="k">)</span>
</pre></div>
</div>
<p>After the transaction has confirmed, decode the raw transaction so we can see the amount of the asset sent and the address it went to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">GRT</span><span class="o">=</span><span class="k">$(</span>elements-cli getrawtransaction <span class="nv">$TX</span><span class="k">)</span>
Alice:~$ <span class="nv">DRT</span><span class="o">=</span><span class="k">$(</span>elements-cli decoderawtransaction <span class="nv">$GRT</span><span class="k">)</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="creating-raw-issuances">
<h2><a class="toc-backref" href="#id7">Creating Raw Issuances</a><a class="headerlink" href="#creating-raw-issuances" title="Permalink to this headline">¶</a></h2>
<p>Get an address to issue the asset to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ASSET_ADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress <span class="s2">&quot;&quot;</span> legacy<span class="k">)</span>
</pre></div>
</div>
<p>Get an address to issue the reissuance token to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">TOKEN_ADDR</span><span class="o">=</span><span class="k">$(</span>elements-cli getnewaddress <span class="s2">&quot;&quot;</span> legacy<span class="k">)</span>
</pre></div>
</div>
<p>Create the raw transaction and fund it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">RAWTX</span><span class="o">=</span><span class="k">$(</span>elements-cli createrawtransaction <span class="s1">&#39;&#39;&#39;[]&#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;{&quot;&#39;&#39;data&#39;&#39;&quot;:&quot;&#39;&#39;00&#39;&#39;&quot;}&#39;&#39;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">FRT</span><span class="o">=</span><span class="k">$(</span>elements-cli fundrawtransaction <span class="nv">$RAWTX</span><span class="k">)</span>
Alice:~$ <span class="nv">HEXFRT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$FRT</span> <span class="p">|</span> jq <span class="s1">&#39;.hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Create the raw issuance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">ASSET_AMOUNT</span><span class="o">=</span><span class="m">100</span>
Alice:~$ <span class="nv">TOKEN_AMOUNT</span><span class="o">=</span><span class="m">1</span>
Alice:~$ <span class="nv">RIA</span><span class="o">=</span><span class="k">$(</span>elements-cli rawissueasset <span class="nv">$HEXFRT</span> <span class="s1">&#39;&#39;&#39;[{&quot;&#39;&#39;asset_amount&#39;&#39;&quot;:&#39;</span><span class="nv">$ASSET_AMOUNT</span><span class="s1">&#39;, &quot;&#39;&#39;asset_address&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$ASSET_ADDR</span><span class="s1">&#39;&#39;&#39;&quot;, &quot;&#39;&#39;token_amount&#39;&#39;&quot;:&#39;</span><span class="nv">$TOKEN_AMOUNT</span><span class="s1">&#39;, &quot;&#39;&#39;token_address&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$TOKEN_ADDR</span><span class="s1">&#39;&#39;&#39;&quot;, &quot;&#39;&#39;blind&#39;&#39;&quot;:false}]&#39;&#39;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>The results of which include the following for reference:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">HEXRIA</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">ASSET</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].asset&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">ENTROPY</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].entropy&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].token&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
</pre></div>
</div>
<p>Blind, sign and send the transaction that creates the asset issuance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ <span class="nv">BRT</span><span class="o">=</span><span class="k">$(</span>elements-cli blindrawtransaction <span class="nv">$HEXRIA</span> <span class="nb">true</span> <span class="s1">&#39;&#39;&#39;[]&#39;&#39;&#39;</span> <span class="nb">false</span><span class="k">)</span>
Alice:~$ <span class="nv">SRT</span><span class="o">=</span><span class="k">$(</span>elements-cli signrawtransactionwithwallet <span class="nv">$BRT</span><span class="k">)</span>
Alice:~$ <span class="nv">HEXSRT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$SRT</span> <span class="p">|</span> jq <span class="s1">&#39;.hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
Alice:~$ <span class="nv">ISSUETX</span><span class="o">=</span><span class="k">$(</span>elements-cli sendrawtransaction <span class="nv">$HEXSRT</span><span class="k">)</span>
</pre></div>
</div>
<p>Confirm and check it worked:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Alice:~$ elements-cli generatetoaddress <span class="m">101</span> <span class="k">$(</span>elements-cli getnewaddress<span class="k">)</span>
Alice:~$ elements-cli listissuances
Alice:~$ elements-cli getwalletinfo
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="proof-of-issuance-blockstream-s-liquid-asset-registry">
<h2><a class="toc-backref" href="#id8">Proof of Issuance - Blockstream’s Liquid Asset Registry</a><a class="headerlink" href="#proof-of-issuance-blockstream-s-liquid-asset-registry" title="Permalink to this headline">¶</a></h2>
<p>This example shows how to use Blockstream’s <a class="reference external" href="https://assets.blockstream.info">Liquid Asset Registry</a>. The asset registry allows you to register an asset and prove ownership against a domain name.</p>
<p>The code below creates an asset, an associated token, and outputs two files:</p>
<ul class="simple">
<li><p>A ‘liquid-asset-proof-‘ file that must be placed on the server of the registered domain over the entire lifecycle of the asset.</p></li>
<li><p>A ‘register_asset.sh’ file that, when run, will post the asset registration data to Blockstream’s Liquid Asset Registry.</p></li>
</ul>
<p>The use of the output files will be explained later.</p>
<p>There are six fields that need setting within the script:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NAME</span></code> The name of the asset as it will apear in the registry and applications that use asset registry data, such as the <a class="reference external" href="https://blockstream.info/liquid/">Blockstream Explorer</a>. Length must be 5 to 255 ascii characters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TICKER</span></code> The ticker you would like to assign to the asset. Length must be 3 to 5 characters (valid characters are a-z and A-Z).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOMAIN</span></code> The domain that will be used to verify the asset. Must be a valid domain name format, for example: example.com or sub.example.com. Do not include the http/s or www prefixes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ASSET_AMOUNT</span></code> The amount to be issued. It is preferable to consider one satoshi unit as representing one asset. So to issue an amount of 100 of an asset, a value of 0.00000100 should be used. Please note that how this value is displayed within applications that use asset registry data is affected by the <code class="docutils literal notranslate"><span class="pre">PRECISION</span></code> field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TOKEN_AMOUNT</span></code> The amount of reissuance tokens to be created. It is preferable to consider one satoshi unit as representing one reissuance token, so a value of 0.00000001 will create 0.00000001 reissuance tokens and when viewed from Liquid Core it will also show as 0.00000001. When viewed from an app that uses satoshi sized units, such as the <a class="reference external" href="https://blockstream.info/liquid/">Blockstream Explorer</a> it will show as 1. This field is not affected by the <code class="docutils literal notranslate"><span class="pre">PRECISION</span></code> field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PRECISION</span></code> The precision used to display the asset amount within applications that use <a class="reference external" href="https://assets.blockstream.info">Liquid Asset Registry</a> data, such as the <a class="reference external" href="https://blockstream.info/liquid/">Blockstream Explorer</a>. Examples: a <code class="docutils literal notranslate"><span class="pre">PRECISION</span></code> value of 0 for an <code class="docutils literal notranslate"><span class="pre">ASSET_AMOUNT</span></code> of 0.00000100 will create a value of 0.00000100 when viewed from Liquid Core and 100 when viewed in an app that uses the asset registry data. A <code class="docutils literal notranslate"><span class="pre">PRECISION</span></code> value of 2 for an <code class="docutils literal notranslate"><span class="pre">ASSET_AMOUNT</span></code> of 0.00000100 will create a value of 0.00000100 when viewed from Liquid Core and 1.00 when viewed in the same app. The default is 0 and the maximum value is 8.</p></li>
</ul>
<p>The code below uses Liquid in live mode. The code can easily be adapted for test use.</p>
<p>Save the code below in a file named issue_and_prepare_register.sh</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> -x
<span class="nb">shopt</span> -s expand_aliases

<span class="c1"># ASSUMES elementsd IS ALREADY RUNNING</span>

<span class="c1">######################################################</span>
<span class="c1">#                                                    #</span>
<span class="c1">#    SCRIPT CONFIG - PLEASE REVIEW BEFORE RUNNING    #</span>
<span class="c1">#                                                    #</span>
<span class="c1">######################################################</span>

<span class="c1"># Amend the following:</span>
<span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;Wintercoin&quot;</span>
<span class="nv">TICKER</span><span class="o">=</span><span class="s2">&quot;WTX&quot;</span>
<span class="c1"># Do not use a domain prefix in the following:</span>
<span class="nv">DOMAIN</span><span class="o">=</span><span class="s2">&quot;wintercooled.github.io&quot;</span>
<span class="c1"># Issue 100 assets using the satoshi unit, dependant on PRECISION when viewed from</span>
<span class="c1"># applications using Asset Registry data.</span>
<span class="nv">ASSET_AMOUNT</span><span class="o">=</span><span class="m">0</span>.00000100
<span class="c1"># Issue 1 reissuance token using the satoshi unit, unaffected by PRECISION.</span>
<span class="nv">TOKEN_AMOUNT</span><span class="o">=</span><span class="m">0</span>.00000001

<span class="c1"># Amend the following if needed:</span>
<span class="nv">PRECISION</span><span class="o">=</span><span class="m">0</span>

<span class="c1"># Don&#39;t change the following:</span>
<span class="nv">VERSION</span><span class="o">=</span><span class="m">0</span>

<span class="c1"># If your Liquid node has not seen enough transactions to calculate</span>
<span class="c1"># its own feerate you will need to specify one to prevent a &#39;feeRate&#39;</span>
<span class="c1"># error. We&#39;ll assume this is the case:</span>
<span class="nv">FEERATE</span><span class="o">=</span><span class="m">0</span>.00003000

<span class="c1"># Change the following to point to your elements-cli binary and liquid data directory.</span>
<span class="nb">alias</span> e1-cli<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/elements-0.17.0.1/bin/elements-cli -datadir=</span><span class="nv">$HOME</span><span class="s2">/.elements&quot;</span>

<span class="c1">##############################</span>
<span class="c1">#                            #</span>
<span class="c1">#    END OF SCRIPT CONFIG    #</span>
<span class="c1">#                            #</span>
<span class="c1">##############################</span>

<span class="c1"># Exit on error</span>
<span class="nb">set</span> -o errexit

<span class="c1"># We need to get a &#39;legacy&#39; type (prefix &#39;CTE&#39;) address for this:</span>
<span class="nv">NEWADDR</span><span class="o">=</span><span class="k">$(</span>e1-cli getnewaddress <span class="s2">&quot;&quot;</span> legacy<span class="k">)</span>

<span class="nv">VALIDATEADDR</span><span class="o">=</span><span class="k">$(</span>e1-cli getaddressinfo <span class="nv">$NEWADDR</span><span class="k">)</span>

<span class="nv">PUBKEY</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VALIDATEADDR</span> <span class="p">|</span> jq <span class="s1">&#39;.pubkey&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>

<span class="nv">ASSET_ADDR</span><span class="o">=</span><span class="nv">$NEWADDR</span>

<span class="nv">NEWADDR</span><span class="o">=</span><span class="k">$(</span>e1-cli getnewaddress <span class="s2">&quot;&quot;</span> legacy<span class="k">)</span>

<span class="nv">TOKEN_ADDR</span><span class="o">=</span><span class="nv">$NEWADDR</span>

<span class="c1"># Create the contract and calculate the contract hash.</span>
<span class="c1"># The contract is formatted for use in the Blockstream Asset Registry</span>
<span class="c1"># Do not amend the following!</span>

<span class="nv">CONTRACT</span><span class="o">=</span><span class="s1">&#39;{&quot;entity&quot;:{&quot;domain&quot;:&quot;&#39;</span><span class="nv">$DOMAIN</span><span class="s1">&#39;&quot;},&quot;issuer_pubkey&quot;:&quot;&#39;</span><span class="nv">$PUBKEY</span><span class="s1">&#39;&quot;,&quot;name&quot;:&quot;&#39;</span><span class="nv">$NAME</span><span class="s1">&#39;&quot;,&quot;precision&quot;:&#39;</span><span class="nv">$PRECISION</span><span class="s1">&#39;,&quot;ticker&quot;:&quot;&#39;</span><span class="nv">$TICKER</span><span class="s1">&#39;&quot;,&quot;version&quot;:&#39;</span><span class="nv">$VERSION</span><span class="s1">&#39;}&#39;</span>

<span class="c1"># We will hash using openssl, other options are available</span>
<span class="nv">CONTRACT_HASH</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> -n <span class="nv">$CONTRACT</span> <span class="p">|</span> openssl dgst -sha256<span class="k">)</span>
<span class="nv">CONTRACT_HASH</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">CONTRACT_HASH</span><span class="p">#</span><span class="s2">&quot;(stdin)= &quot;</span><span class="si">}</span><span class="k">)</span>

<span class="c1"># Reverse the hash. This will be calculated from the contract by the asset registry service to</span>
<span class="c1"># check validity of the issuance against the registry entry.</span>
<span class="nv">TEMP</span><span class="o">=</span><span class="nv">$CONTRACT_HASH</span>

<span class="nv">LEN</span><span class="o">=</span><span class="si">${#</span><span class="nv">TEMP</span><span class="si">}</span>

<span class="k">until</span> <span class="o">[</span> <span class="nv">$LEN</span> -eq <span class="s2">&quot;0&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
    <span class="nv">END</span><span class="o">=</span><span class="si">${</span><span class="nv">TEMP</span><span class="p">:(-2)</span><span class="si">}</span>
    <span class="nv">CONTRACT_HASH_REV</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CONTRACT_HASH_REV$END</span><span class="s2">&quot;</span>
    <span class="nv">TEMP</span><span class="o">=</span><span class="si">${</span><span class="nv">TEMP</span><span class="p">:</span><span class="k">:-</span><span class="nv">2</span><span class="si">}</span>
    <span class="nv">LEN</span><span class="o">=</span><span class="k">$((</span>LEN-2<span class="k">))</span>
<span class="k">done</span>

<span class="nv">RAWTX</span><span class="o">=</span><span class="k">$(</span>e1-cli createrawtransaction <span class="s1">&#39;&#39;&#39;[]&#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;{&quot;&#39;&#39;data&#39;&#39;&quot;:&quot;&#39;&#39;00&#39;&#39;&quot;}&#39;&#39;&#39;</span><span class="k">)</span>

<span class="c1"># If your Liquid node has seen enough transactions to calculate its</span>
<span class="c1"># own feeRate then you can switch the two lines below. We&#39;ll default</span>
<span class="c1"># to specifying a fee rate:</span>
<span class="c1">#FRT=$(e1-cli fundrawtransaction $RAWTX)</span>
<span class="nv">FRT</span><span class="o">=</span><span class="k">$(</span>e1-cli fundrawtransaction <span class="nv">$RAWTX</span> <span class="s1">&#39;&#39;&#39;{&quot;&#39;&#39;feeRate&#39;&#39;&quot;:&#39;</span><span class="nv">$FEERATE</span><span class="s1">&#39;}&#39;&#39;&#39;</span><span class="k">)</span>

<span class="nv">HEXFRT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$FRT</span> <span class="p">|</span> jq <span class="s1">&#39;.hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>

<span class="nv">RIA</span><span class="o">=</span><span class="k">$(</span>e1-cli rawissueasset <span class="nv">$HEXFRT</span> <span class="s1">&#39;&#39;&#39;[{&quot;&#39;&#39;asset_amount&#39;&#39;&quot;:&#39;</span><span class="nv">$ASSET_AMOUNT</span><span class="s1">&#39;, &quot;&#39;&#39;asset_address&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$ASSET_ADDR</span><span class="s1">&#39;&#39;&#39;&quot;, &quot;&#39;&#39;token_amount&#39;&#39;&quot;:&#39;</span><span class="nv">$TOKEN_AMOUNT</span><span class="s1">&#39;, &quot;&#39;&#39;token_address&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$TOKEN_ADDR</span><span class="s1">&#39;&#39;&#39;&quot;, &quot;&#39;&#39;blind&#39;&#39;&quot;:false, &quot;&#39;&#39;contract_hash&#39;&#39;&quot;:&quot;&#39;&#39;&#39;</span><span class="nv">$CONTRACT_HASH_REV</span><span class="s1">&#39;&#39;&#39;&quot;}]&#39;&#39;&#39;</span><span class="k">)</span>

<span class="c1"># Details of the issuance...</span>
<span class="nv">HEXRIA</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
<span class="nv">ASSET</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].asset&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
<span class="nv">ENTROPY</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].entropy&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>
<span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$RIA</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].token&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>

<span class="c1"># Blind, sign and send the issuance transaction...</span>
<span class="nv">BRT</span><span class="o">=</span><span class="k">$(</span>e1-cli blindrawtransaction <span class="nv">$HEXRIA</span> <span class="nb">true</span> <span class="s1">&#39;&#39;&#39;[]&#39;&#39;&#39;</span> <span class="nb">false</span><span class="k">)</span>

<span class="nv">SRT</span><span class="o">=</span><span class="k">$(</span>e1-cli signrawtransactionwithwallet <span class="nv">$BRT</span><span class="k">)</span>

<span class="nv">HEXSRT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$SRT</span> <span class="p">|</span> jq <span class="s1">&#39;.hex&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>

<span class="c1"># Test the transaction&#39;s acceptance into the mempool</span>
<span class="nv">TEST</span><span class="o">=</span><span class="k">$(</span>e1-cli testmempoolaccept <span class="s1">&#39;&#39;&#39;[&quot;&#39;</span><span class="nv">$HEXSRT</span><span class="s1">&#39;&quot;]&#39;&#39;&#39;</span><span class="k">)</span>
<span class="nv">ALLOWED</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$TEST</span> <span class="p">|</span> jq <span class="s1">&#39;.[0].allowed&#39;</span> <span class="p">|</span> tr -d <span class="s1">&#39;&quot;&#39;</span><span class="k">)</span>

<span class="c1"># If the transaction is valid</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;true&quot;</span> <span class="o">=</span> <span class="nv">$ALLOWED</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
    <span class="c1"># Broadcast the transaction</span>
    <span class="nv">ISSUETX</span><span class="o">=</span><span class="k">$(</span>e1-cli sendrawtransaction <span class="nv">$HEXSRT</span><span class="k">)</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;ERROR SENDING TRANSACTION!&quot;</span>
<span class="k">fi</span>

<span class="c1">#####################################</span>
<span class="c1">#                                   #</span>
<span class="c1">#    ASSET REGISTRY FILE OUTPUTS    #</span>
<span class="c1">#                                   #</span>
<span class="c1">#####################################</span>

<span class="c1"># Blockstream&#39;s Liquid Asset Registry (https://assets.blockstream.info/) can be used to register an asset to an issuer.</span>
<span class="c1"># We already have the required data and have formatted the contract plain text into a format that we can use for this.</span>

<span class="c1"># Write the domain and asset ownership proof to a file. The file should then be placed over the entire lifecycle of</span>
<span class="c1"># the asset in a directory within the root of your domain named &quot;.well-known&quot;</span>
<span class="c1"># The file should have no extension and just copied as it is created.</span>

<span class="nb">echo</span> <span class="s2">&quot;Authorize linking the domain name </span><span class="nv">$DOMAIN</span><span class="s2"> to the Liquid asset </span><span class="nv">$ASSET</span><span class="s2">&quot;</span> &gt; liquid-asset-proof-<span class="nv">$ASSET</span>

<span class="c1"># After you have placed the above file without your domain you can run the register_asset.sh script created below to post the asset data to the registry.</span>

<span class="nb">echo</span> <span class="s2">&quot;curl https://assets.blockstream.info/ --data-raw &#39;{\&quot;asset_id\&quot;:\&quot;</span><span class="nv">$ASSET</span><span class="s2">\&quot;,\&quot;contract\&quot;:</span><span class="nv">$CONTRACT</span><span class="s2">}&#39;&quot;</span> &gt; register_asset.sh

<span class="c1"># For reference, write some asset details. These are not needed by the asset registry.</span>

<span class="nb">echo</span> <span class="s2">&quot;ISSUETX:</span><span class="nv">$ISSUETX</span><span class="s2"> ASSET:</span><span class="nv">$ASSET</span><span class="s2"> ENTROPY:</span><span class="nv">$ENTROPY</span><span class="s2"> TOKEN:</span><span class="nv">$TOKEN</span><span class="s2"> ASSET_AMOUNT:</span><span class="nv">$ASSET_AMOUNT</span><span class="s2"> TOKEN_AMOUNT:</span><span class="nv">$TOKEN_AMOUNT</span><span class="s2"> ASSET_ADDR:</span><span class="nv">$ASSET_ADDR</span><span class="s2"> TOKEN_ADDR:</span><span class="nv">$TOKEN_ADDR</span><span class="s2"> CONTRACT_HASH_REV:</span><span class="nv">$CONTRACT_HASH_REV</span><span class="s2">&quot;</span> &gt; liquid-asset-ref-<span class="nv">$ASSET</span>

<span class="c1">##################################################################</span>

<span class="nb">echo</span> <span class="s2">&quot;Completed without error&quot;</span>
</pre></div>
</div>
<p>When you have saved the above to the file, edit the variables at the top and of the file and start elements-qt or elementsd using an argument of <code class="docutils literal notranslate"><span class="pre">-server=1</span></code> to allow the Liquid client to communicate with it. Execute the script from the directory you created it in by opening a Terminal session and running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash issue_and_prepare_register.sh
</pre></div>
</div>
<p>In order to register the asset just created:</p>
<ul class="simple">
<li><p>Wait a couple of minutes for the issuance transaction to confirm.</p></li>
<li><p>Place the ‘liquid-asset-proof-‘ file in a folder named ‘.well-known’ in the root of your domain. <strong>This proof should be stored there over the entire lifecycle of the asset.</strong></p></li>
<li><p>Run the ‘register_asset.sh’ script.</p></li>
</ul>
<p>For example, if your domain was www.your-example-domain-here.com and the asset id generated was 123abc (it will of course be much longer) then the file generated would be named:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>liquid-asset-proof-123abc
</pre></div>
</div>
<p>The domain variable in the code above would be set to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>your-example-domain-here.com
</pre></div>
</div>
<p>So the path used to check asset to domain registry would end up being:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>www.your-example-domain-here.com/.well-known/liquid-asset-proof-123abc
</pre></div>
</div>
<p>Once that file is accessible you can then run the ‘register_asset.sh’ script and, when the required checks against the domain and issuance transaction have been made, the registration will be found on Blockstream’s <a class="reference external" href="https://assets.blockstream.info">Liquid Asset Registry</a>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Randy McMillan.
      Last updated on 08Nov2020.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/jquery.fancybox.min.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  <script type="text/javascript">
    $(function(){
      $('.image-reference').fancybox();
    })
  </script>

</body>
</html>