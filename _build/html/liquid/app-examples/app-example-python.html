


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python &mdash; R A N D Y M c M I L L A N</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/jquery.fancybox.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/glpi.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="R A N D Y M c M I L L A N" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            
            <img src="../../_static/images/glpi.png" class="logo" />
          
          </a>

          
            
              <div class="version">
                656073.1604896115

                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">twitter.com</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://twitter.com/randymcmillan">/randymcmillan</a></li>
</ul>
<p class="caption"><span class="caption-text">keybase.io</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/randymcmillan">/randymcmillan</a></li>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/team/bitcoincore">/bitcoincore</a></li>
<li class="toctree-l1"><a class="reference external" href="https://keybase.io/team/bitcoinand">/bitcoinAnd</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html"></a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Python</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python">
<h1>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<p id="python-app">In this example we will be using Python to make a Remote Procedure Call (RPC) to the Liquid daemon, which you will need to start using the config file settings <a class="reference internal" href="app-examples-index.html#config"><span class="std std-ref">outlined above</span></a>.</p>
<p>Our aim is simply to make a call to Liquid using RPC by executing some basic Python code. We will be using the popular <a class="reference external" href="https://github.com/jgarzik/python-bitcoinrpc">AuthServiceProxy</a> Python JSON-RPC interface to handle the connection, authentication and data typing for us as we communicate with our node. We’ll also use <a class="reference external" href="https://virtualenv.pypa.io/">virtualenv</a> to create an isolated environment to run our code in.</p>
<p>You can check if Python is installed on your system by following the steps <a class="reference external" href="https://wiki.python.org/moin/BeginnersGuide/Download">here</a>. We’ll assume you already have Python3 installed.</p>
<p id="python-reqs">First we will need to install a few prerequisites. From the terminal run the following commands one after another:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install python3-pip
sudo pip3 install virtualenv
</pre></div>
</div>
<p>Create a directory named “liquidpython” and move into it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span>
mkdir liquidpython
<span class="nb">cd</span> liquidpython
</pre></div>
</div>
<p>Set up and activate virtualenv in that directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>virtualenv venv
<span class="nb">source</span> venv/bin/activate
</pre></div>
</div>
<p>Use pip to install python-bitcoinrpc within the environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install python-bitcoinrpc
</pre></div>
</div>
<p>That will have set up all we need for our Python example code.</p>
<p>Create a new file named <strong>liquidpython.py</strong> in the “liquidpython” directory and paste the code below into it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">bitcoinrpc.authproxy</span> <span class="kn">import</span> <span class="n">AuthServiceProxy</span><span class="p">,</span> <span class="n">JSONRPCException</span>

<span class="n">rpc_port</span> <span class="o">=</span> <span class="mi">18884</span>
<span class="n">rpc_user</span> <span class="o">=</span> <span class="s1">&#39;user1&#39;</span>
<span class="n">rpc_password</span> <span class="o">=</span> <span class="s1">&#39;password1&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">rpc_connection</span> <span class="o">=</span> <span class="n">AuthServiceProxy</span><span class="p">(</span><span class="s2">&quot;http://</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">@127.0.0.1:</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">rpc_user</span><span class="p">,</span> <span class="n">rpc_password</span><span class="p">,</span> <span class="n">rpc_port</span><span class="p">))</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">rpc_connection</span><span class="o">.</span><span class="n">getwalletinfo</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;balance&quot;</span><span class="p">][</span><span class="s2">&quot;bitcoin&quot;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">JSONRPCException</span> <span class="k">as</span> <span class="n">json_exception</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A JSON RPC Exception occured: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">json_exception</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">general_exception</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An Exception occured: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">general_exception</span><span class="p">))</span>
</pre></div>
</div>
<p>The code defines the details needed to connect to Liquid using RPC commands, sets up the method we want to execute and the parameter we want to pass in, executes the call and prints out the “balance” value from the results.</p>
<p>Before we try running the code make sure the Liquid daemon (elementsd) or Liquid QT (elements-qt) are running.</p>
<p>To run our Python code execute the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 liquidpython.py
</pre></div>
</div>
<p>The result of which should be the balance is written to the terminal.</p>
<p>When you have finished, deactivate virtualenv:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>deactivate
</pre></div>
</div>
<p>When you want to run your code again, activate the environment from within the “liquidpython” directory, run the code and then deactivate when finished:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> venv/bin/activate
python3 liquidrpcpython.py
deactivate
</pre></div>
</div>
<p>Obviously that’s a very basic example but you now have a functioning setup which you can use as a building block for further development. The next section takes the code above and implements it within a Python web application using Flask.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Randy McMillan.
      Last updated on 08Nov2020.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/jquery.fancybox.min.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  <script type="text/javascript">
    $(function(){
      $('.image-reference').fancybox();
    })
  </script>

</body>
</html>