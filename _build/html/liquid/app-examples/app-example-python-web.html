

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Web (Flask) &mdash; R A N D Y M c M I L L A N</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> 
          

          
            
            <img src="../../_static/BeeICON-128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">github.com</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../github.com/randymcmillan.html">/randymcmillan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../github.com/bitcoincore-dev.html">/bitcoincore-dev</a></li>
</ul>
<p class="caption"><span class="caption-text">twitter.com</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../twitter.com/randymcmillan.html">/randymcmillan</a></li>
</ul>
<p class="caption"><span class="caption-text">Blockstream Green</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../green/getting-started/getting-started-index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../green/liquid/liquid-index.html">Liquid Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../green/hww.html">Hardware Wallets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../green/troubleshooting-advanced/troubleshooting-advanced-index.html">Troubleshooting and Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../green/support.html">Support</a></li>
</ul>
<p class="caption"><span class="caption-text">Liquid Network</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../technical_overview.html">Technical Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Liquid Node Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../node_setup.html">Liquid Node Setup (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer-guide/developer-guide-index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-examples-index.html">App Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general-developer-info/general-developer-info-index.html">General Developer Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acquire_lbtc.html">How To Acquire L-BTC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../swap_tool.html">Liquid Swap Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional_resources.html">Additional Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing.html">Contributing to Blockstream Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer-documentation.html">c-lightning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-documentation.html#esplora">Esplora</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-documentation.html#libwally">Libwally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-documentation.html#gdk">GDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-documentation.html#elements">Elements</a></li>
</ul>
<p class="caption"><span class="caption-text">PROOFS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../randymcmillan-asc.html">PGP Pub Key</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../randymcmillan-asc.html#kb-pub-key">KB Pub Key</a></li>
</ul>
<p class="caption"><span class="caption-text">README</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">README</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html"></a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Python Web (Flask)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-web-flask">
<h1>Python Web (Flask)<a class="headerlink" href="#python-web-flask" title="Permalink to this headline">¶</a></h1>
<p>In this example we will be using Python (running within the <a class="reference external" href="http://flask.pocoo.org/">Flask</a> web framework) to make a Remote Procedure Call (RPC) to the Liquid daemon, which you will need to start using the config file settings <a class="reference internal" href="app-examples-index.html#config"><span class="std std-ref">outlined above</span></a>.</p>
<p>Our aim is simply to make a call to Liquid using RPC by executing some basic Python code. We will be using the popular <a class="reference external" href="https://github.com/jgarzik/python-bitcoinrpc">AuthServiceProxy</a> Python JSON-RPC interface to handle the connection, authentication and data typing for us as we communicate with our node. We’ll also use <a class="reference external" href="https://virtualenv.pypa.io/">virtualenv</a> to create an isolated environment to run our code in.</p>
<p>You can check if Python is installed on your system by following the steps <a class="reference external" href="https://wiki.python.org/moin/BeginnersGuide/Download">here</a>. We’ll assume you already have Python3 installed.</p>
<p>We will use the Python code from the previous <a class="reference internal" href="app-examples-index.html#python-app"><span class="std std-ref">Python example</span></a> and have it run from Flask so that we can write the output to a web page.</p>
<p>Assuming you have already installed the <a class="reference internal" href="app-examples-index.html#python-reqs"><span class="std std-ref">prerequisites</span></a> from the previous example (i.e. python3-pip, virtualenv), we just need to set up the environment and install Flask:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span>
mkdir liquidpythonflask
<span class="nb">cd</span> liquidpythonflask
virtualenv venv
<span class="nb">source</span> venv/bin/activate
pip3 install python-bitcoinrpc
pip3 install Flask
</pre></div>
</div>
<p>Before we try running any code make sure the Liquid daemon is running.</p>
<p>Create a file named liquidpythonflask.py, into which you should paste the following code. We are using AuthServiceProxy to handle the connection, authentication and data typing for us as we communicate with our Liquid node.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Python requires that lines are indented correctly. Make sure the code below is copied correctly and is using 4 spaces for indenting lines. Also note that some of the lines below wrap when viewed in a browser.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">bitcoinrpc.authproxy</span> <span class="kn">import</span> <span class="n">AuthServiceProxy</span><span class="p">,</span> <span class="n">JSONRPCException</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">liquid</span><span class="p">():</span>
    <span class="n">rpc_port</span> <span class="o">=</span> <span class="mi">18884</span>
    <span class="n">rpc_user</span> <span class="o">=</span> <span class="s1">&#39;user1&#39;</span>
    <span class="n">rpc_password</span> <span class="o">=</span> <span class="s1">&#39;password1&#39;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">rpc_connection</span> <span class="o">=</span> <span class="n">AuthServiceProxy</span><span class="p">(</span><span class="s2">&quot;http://</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">@127.0.0.1:</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">rpc_user</span><span class="p">,</span> <span class="n">rpc_password</span><span class="p">,</span> <span class="n">rpc_port</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">rpc_connection</span><span class="o">.</span><span class="n">getwalletinfo</span><span class="p">()</span>

    <span class="k">except</span> <span class="n">JSONRPCException</span> <span class="k">as</span> <span class="n">json_exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;A JSON RPC Exception occured: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">json_exception</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">general_exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;An Exception occured: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">general_exception</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">][</span><span class="s1">&#39;bitcoin&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Start the web server and execute our code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">FLASK_APP</span><span class="o">=</span>liquidtutorial.py flask run
</pre></div>
</div>
<p>You should see the web server startup. Now all you have to do is open a browser and go to:</p>
<p><a class="reference external" href="http://127.0.0.1:5000">http://127.0.0.1:5000</a></p>
<p>Which simply writes the result of the “balance” call to the page.</p>
<p>The example is intended to get you up and running. You now have a functioning setup which you can use as a building block for further development using Flask.</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Randy McMillan
      <span class="lastupdated">
        Last updated on Nov 05, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>